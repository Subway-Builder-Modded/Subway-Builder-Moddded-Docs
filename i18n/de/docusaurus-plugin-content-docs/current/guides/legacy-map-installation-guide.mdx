---
id: legacy-map-installation-guide
title: Installationsanleitung für Karten (Legacy)
---

Bevor der Map Manager entwickelt wurde, wurde die Methode `serve` verwendet. Sie war komplexer und unterschied sich von Karte zu Karte, aber wir können die benötigten Dateien problemlos extrahieren und die Karte in den Map Manager portieren.

### Schritt 1 - Installation des Map Managers
Lade die neueste Version des Map Managers unter https://github.com/Kronifer/subwaybuilder-patcher/releases herunter. Klicke dazu auf die Version, die deinem Betriebssystem entspricht.

<img width="1000" alt="image" src="https://github.com/user-attachments/assets/4bc7b27d-9868-475f-9a4a-5ce447a77036" />

:::note
Für Windows benötigst du die `.exe`-Datei. Für Linux die `.zip`-Datei. Für MacOS verwende die Datei `arm64.dmg`, wenn dein Mac einen Apple-Silicon-Chip (z. B. M1, M2, M3 usw.) besitzt, und die Datei `x64.dmg`, wenn dein Mac einen Intel-Chip hat. Als Faustregel gilt: Macs ab etwa 2021 besitzen in der Regel Apple-Silicon-Chips, ältere Modelle meist Intel-Chips – überprüfe dies jedoch, da es Ausnahmen gibt.
:::

:::note
Unter MacOS wird das `.dmg`-Installationsprogramm wahrscheinlich unter Quarantäne gestellt. Um es auszuführen, öffne ein Terminal im Ordner, in den du die Datei heruntergeladen hast, und führe `xattr -d com.apple.quarantine {INSTALLER_FILENAME}` aus. Wenn du beispielsweise Version 0.2.7 für einen ARM-Mac herunterlädst, würdest du `xattr -d com.apple.quarantine Subway.Builder.Map.Manager-0.2.7-arm64.dmg` ausführen.

Zusätzlich kann der Library-Ordner, der den Ordner metro-maker4 enthält, standardmäßig ausgeblendet sein. Um dies zu ändern, öffne den Finder und gehe in deinen Home-Ordner. Wähle anschließend View -> Show View Options -> Show Library Folder. 
:::

Installiere danach die App wie jede andere Anwendung. Sobald die Installation abgeschlossen ist, starte die App und durchlaufe den Einrichtungsprozess, indem du den Speicherort der Spiel-Executable sowie deinen `metro-maker4`-Ordner auswählst. Anschließend kannst du die ZIP-Datei, das Installationsprogramm und alle anderen heruntergeladenen Dateien löschen.

<img width="1200" alt="image" src="https://private-user-images.githubusercontent.com/19807509/553076498-ea9604c2-bc93-4cb4-939c-73d957b22f2a.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NzE3Mzg4NzcsIm5iZiI6MTc3MTczODU3NywicGF0aCI6Ii8xOTgwNzUwOS81NTMwNzY0OTgtZWE5NjA0YzItYmM5My00Y2I0LTkzOWMtNzNkOTU3YjIyZjJhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNjAyMjIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjYwMjIyVDA1MzYxN1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTBiZWY2OTk4M2UxMWQxMTk5ZjJkZGZhY2RmOGFkMzRkNjFlM2M1ZmZjMWI5ZDk1YzlmYWM3NmFkMTg5NTZmZmQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.FPcEPbOlAyqlZYh49DK22UItzW7fMtvY_-HJcKj1dl8" />

### Schritt 2 - Dateien extrahieren
Nun müssen wir die benötigten Dateien aus der heruntergeladenen Karte extrahieren. Insgesamt benötigen wir 6 Dateien:
 - `XXX.pmtiles` (`XXX` ist dein Stadtcode; z. B. `MIA` für Miami)
 - `demand_data.json`
 - `buildings_index.json`
 - `roads.geojson`
 - `runways_taxiways.geojson`
 - `config.json`

Die erste Datei ist einfach. Suche in der heruntergeladenen Karte nach der Datei XXX.pmtiles. Sie befindet sich irgendwo im Verzeichnis, entweder im Hauptordner oder in einem Unterordner. Erstelle zunächst einen temporären Arbeitsordner, in dem wir unsere 6 Dateien speichern.

Die nächsten 4 Dateien erfordern etwas mehr Arbeit. Du solltest sie relativ leicht finden können, allerdings liegen sie alle in komprimierter Form vor (sie enden auf `.gz`). Daher müssen wir sie als Archiv entpacken.

:::tip
Unter Windows und Linux kannst du [7-Zip](https://www.7-zip.org/download.html) verwenden, um das `.gz`-Archiv zu entpacken. MacOS unterstützt das Entpacken von gzip-Archiven nativ – du kannst also einfach darauf klicken, um sie zu extrahieren.
:::

Im Inneren solltest du jeweils eine einzelne Datei sehen. Wenn du das Archiv `demand_data.json.gz` öffnest, solltest du darin `demand_data.json` finden – das Gleiche gilt für die anderen 3 Archive. Extrahiere alle 4 Dateien und lege sie in deinen temporären Arbeitsordner. Manche Karten enthalten doppelte Datendateien im Verzeichnis. Es spielt keine Rolle, welche du auswählst, da sie identisch sind.

Die letzte benötigte Datei ist `config.json`. Diese ist am schwierigsten. Erstelle zunächst eine neue Datei mit dem Namen `config.json`.

:::tip
Stelle sicher, dass es sich um eine `.json`-Datei handelt. Suche gegebenenfalls online, wie du Dateinamenerweiterungen in deinem Betriebssystem aktivierst, falls der Dateityp nicht als `JSON File` angezeigt wird.
:::

Füge in `config.json` folgende Vorlage ein:
```
{
  "name": "Boise",
  "code": "BOI",
  "description": "Build a rapid transit network for one of America`s fastest growing cities.",
  "population": 329866,
  "initialViewState": {
    "zoom": 13,
    "latitude": 43.617499,
    "longitude": -116.245394,
    "bearing": 0
  },
  "creator": "muffintime",
  "version": "2.1.0"
}
```

Nun müssen wir diese Daten an unsere Karte anpassen. Im Verzeichnis deiner Karte sollte sich eine `.js`-Datei befinden, meist `index.js`. In dieser Datei findest du etwas, das unserer Vorlage sehr ähnlich sieht.

<img width="1097" height="402" alt="image" src="https://github.com/user-attachments/assets/b25a1577-badf-4adf-a414-d76003c3a26d" />

> Dies befindet sich in der Datei `index.js` des Canadian Cities Map Pack.

:::tip
Falls dein Verzeichnis mehrere `.js`-Dateien enthält, überprüfe alle. Eine davon enthält die benötigten Daten.
:::

Aus dieser Datei können wir folgende Werte entnehmen:
 - `name`
 - `code`
 - `description`
 - `population`
 - `intialViewState` (und alle dazugehörigen Parameter)

:::note
Falls deine Daten kein `initialViewState` enthalten, kannst du 12 oder 13 für `zoom` und 0 für `bearing` verwenden. Für `latitude` und `longitude` kannst du beliebige Werte innerhalb des Koordinatenbereichs deiner bbox wählen (die `latitude` entspricht der **2.** und **4.** Zahl, die `longitude` der **1.** und **3.**). Im oben gezeigten Toronto-Beispiel könnten wir beispielsweise 44.0 und -79.0 für `latitude` bzw. `longitude` verwenden.
:::

Die letzten beiden benötigten Werte, `creator` und `version`, findest du in der Datei `manifest.json`, die jedes Projekt enthält. Sobald du alle benötigten Informationen für deine `config.json` hast, stelle sicher, dass du alle 6 Dateien beisammen hast. Danach kannst du mit dem nächsten Schritt fortfahren.

:::important
Auch wenn es nicht verpflichtend ist: Wenn du diese portierte Karte weiterverbreiten möchtest, gib bitte den `creator` an. So wird sichergestellt, dass die ursprünglichen Ersteller weiterhin Anerkennung für ihre Karten erhalten.
:::

### Schritt 3 - Dateien zippen
Nachdem wir nun alle 6 Dateien haben, müssen wir sie in eine `.zip`-Datei packen. Dies kann unter Windows oder Linux nativ oder mit [7-Zip](https://www.7-zip.org/download.html) erfolgen, unter MacOS durch Auswahl von `Compress`. Sobald du eine `.zip`-Datei erstellt hast, ist das Portieren des Mods im Grunde abgeschlossen. Es bleibt nur noch, ihn ins Spiel zu importieren, um ihn zu spielen.

### Schritt 4 - Die Karte hinzufügen

Um eine Karte zu installieren, klicke einfach auf die Schaltfläche `ADD A MAP` und importiere die ZIP-Datei, die deine Karte enthält. Nach Abschluss solltest du den Kartennamen, den Ersteller und die Version auf dem Bildschirm sehen.

<img width="1200" alt="image" src="https://private-user-images.githubusercontent.com/19807509/553076477-c08ebbab-5ce3-41d5-b713-b8050d2a51bf.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NzE3MzkxNDYsIm5iZiI6MTc3MTczODg0NiwicGF0aCI6Ii8xOTgwNzUwOS81NTMwNzY0NzctYzA4ZWJiYWItNWNlMy00MWQ1LWI3MTMtYjgwNTBkMmE1MWJmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNjAyMjIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjYwMjIyVDA1NDA0NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPThkYTFlZWEzYjNiNDQ2ZTA0MTAzMjZhZDU0MzEzZGNhNTBjNDk3NGU5MGM5NzNkNzc4ZDI0YTc4NjI5MzRhYmImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.yke8u4Iom4X8-FMtvOCsY89LSCadBdZ9MKoL7TraC14" />

### Schritt 5 - Subway Builder starten

Sobald du alle deine Karten hinzugefügt hast, kannst du das Spiel mit `START GAME` starten. Auf diese Weise wirst du das Spiel künftig starten. Im Spiel erscheinen deine Karten unter dem Tab `CUSTOM` und sind spielbereit!

:::important
Aufgrund der aktuellen Funktionsweise des Spiels musst du das Spiel jedes Mal über den Map Manager starten, wenn du eine benutzerdefinierte Karte spielen möchtest. Wenn du das Spiel nicht über den Map Manager startest, werden Gebäude und Wasser im Spiel nicht angezeigt.
:::
