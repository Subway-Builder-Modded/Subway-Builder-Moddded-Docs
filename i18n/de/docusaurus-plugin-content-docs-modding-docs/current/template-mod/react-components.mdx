---
id: react-components
title: React-Komponenten
---

Subway Builder Mods können mit React eigene UI-Elemente rendern. Das Spiel stellt React zur Laufzeit zur Verfügung, du
musst es nicht in deine Mod einbinden.

## Wie der React Shim funktioniert {#how-the-react-shim-works}

Die Vorlage enthält einen React shim bei `src/types/react.ts`, der React aus der Spiel-API anspricht:

```ts
const React = window.SubwayBuilderAPI.utils.React;
export default React;
export const { useState, useEffect, useCallback, useMemo, useRef } = React;
```

Vite ist so konfiguriert, dass alle `react` Importe auf diesen Shim zeigen, sodass du normalen React-Code nutzen kannst:

```tsx
import { useState, useEffect } from 'react';
```

Das funktioniert einfach so. Der Import wird beim Kompilieren zum Shim umgeleitet, in der Laufzeit wird die React-Instanz
des Spiels genutzt.

## UI-Komponenten des Spiels nutzen {#using-game-ui-components}

Das Spiel stellt eine reihe von gestalteten UI-Komponenten bereit. Du kannst sie durch die API abrufen:

```tsx
const api = window.SubwayBuilderAPI;

// Wandle in any um, da die Komponenten zur Laufzeit funktionieren, aber keine strikten Prop-Typen haben.
const { Button, Card, CardHeader, CardTitle, CardContent } = api.utils.components as Record<
  string,
  React.ComponentType<any>
>;
```

### Available Components {#available-components}

| Component         | Description                          |
| ----------------- | ------------------------------------ |
| `Button`          | Standard Button mit versch. Vatianten|
| `Card`            | Container Card                       |
| `CardHeader`      | Card Headerabschnitt                 |
| `CardTitle`       | Card Titeltext                       |
| `CardContent`     | Card Body Inhalt                     |
| `CardDescription` | Card Beschreibungstext               |
| `Switch`          | Toggle Schalter                      |
| `Slider`          | Range Slider                         |
| `Label`           | Form Label                           |
| `Input`           | Text Input                           |
| `Badge`           | Status Abzeichen                     |
| `Progress`        | Fortschrittsleiste                   |
| `Tooltip`         | Tooltip Wrapper                      |
| `TooltipProvider` | Tooltip Kontext Provider             |
| `TooltipTrigger`  | Tooltip Triggerelement               |
| `TooltipContent`  | Tooltip Inhalts-Pop-Up               |
| `SubwayButton`    | Button im Spielstil                  |
| `MainMenuButton`  | Button im Haupmenüstil               |

### Button Beispiel {#button-example}

```tsx
const { Button } = api.utils.components as Record<string, React.ComponentType<any>>;

function MyPanel() {
  return (
    <div className="flex flex-col gap-2">
      <Button onClick={() => console.log('click')}>Default</Button>
      <Button variant="secondary">Secondary</Button>
      <Button variant="destructive">Delete</Button>
      <Button variant="outline">Outline</Button>
      <Button variant="ghost">Ghost</Button>
    </div>
  );
}
```

### Card Beispiel {#card-example}

```tsx
const { Card, CardHeader, CardTitle, CardContent } = api.utils.components as Record<
  string,
  React.ComponentType<any>
>;

function StatsCard() {
  const stats = api.gameState.getRidershipStats();

  return (
    <Card>
      <CardHeader>
        <CardTitle>Ridership</CardTitle>
      </CardHeader>
      <CardContent>
        <p>{stats.totalRidersPerHour} riders/hour</p>
        <p>{stats.totalRiders} total</p>
      </CardContent>
    </Card>
  );
}
```

## Lucide Icons benutzen {#using-lucide-icons}

Das Spiel stellt ungefähr 5000 [Lucide](https://lucide.dev/) Icons bereit. Zugriff gelingt über PascalCase Namen:

```tsx
const icons = api.utils.icons;

function MyPanel() {
  const TrainIcon = icons.Train;
  const SettingsIcon = icons.Settings;
  const MapPinIcon = icons.MapPin;

  return (
    <div className="flex items-center gap-2">
      <TrainIcon className="w-4 h-4" />
      <span>Trains</span>
    </div>
  );
}
```

Häufig brauchbare Icons sind: `Train`, `MapPin`, `Settings`, `DollarSign`, `BarChart`, `Route`,
`Building`, `Layers`, `Clock`, `Play`, `Pause`, `Zap`, `Plus`, `Minus`, `Search`, `Filter`,
`Download`, `Save`.

Für Iconnamen in `addFloatingPanel`, `addToolbarButton` etc. nutzt du direkt den PascalCase string Namen:

```ts
api.ui.addFloatingPanel({
  id: 'my-panel',
  icon: 'Train', // String Name, nicht die Komponente
  title: 'My Panel',
  render: MyPanel,
});
```

## Recharts benutzen {#using-recharts}

Das Spiel beinhaltet [Recharts](https://recharts.org/) zur Darstellung von Daten. Alle Standardkomponenten
sind verfügbar:

```tsx
const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip } =
  api.utils.charts;

function RidershipChart() {
  const metrics = api.gameState.getLineMetrics();

  const data = metrics.map((m) => ({
    name: m.name,
    riders: m.ridersPerHour,
  }));

  return (
    <ResponsiveContainer width="100%" height={200}>
      <BarChart data={data}>
        <CartesianGrid strokeDasharray="3 3" />
        <XAxis dataKey="name" />
        <YAxis />
        <Tooltip />
        <Bar dataKey="riders" fill="#3b82f6" />
      </BarChart>
    </ResponsiveContainer>
  );
}
```

### Verfügbare Chart-Komponenten {#available-chart-components}

| Component                 | Use for                                           |
| ------------------------- | ------------------------------------------------- |
| `ResponsiveContainer`     | Auto-sizing Wrapper (Um jedes Diagramm einsetzen) |
| `BarChart`, `Bar`         | Balkendiagramme                                   |
| `LineChart`, `Line`       | Liniendiagramme                                   |
| `AreaChart`, `Area`       | Flächendiagramme                                  |
| `PieChart`, `Pie`, `Cell` | Kreisdiagramme                                    |
| `RadarChart`, `Radar`     | Radardiagramme                                    |
| `ComposedChart`           | Gemischte Diagrammtypen                           |
| `XAxis`, `YAxis`          | Achsen                                            |
| `CartesianGrid`           | Rasterlinien                                      |
| `Tooltip`                 | Hover Tooltips                                    |
| `Legend`                  | Diagrammlegende                                   |

## Styling mit Tailwind {#styling-with-tailwind}

Das Spiel nutzt Tailwind CSS. Du kannst Tailwind Utility Klassen direkt in deinen Komponenten benutzen:

```tsx
function MyPanel() {
  return (
    <div className="flex flex-col gap-3 p-3">
      <h3 className="text-lg font-semibold">Meine Mod</h3>
      <p className="text-sm text-muted-foreground">Eine Beschreibung</p>
      <div className="grid grid-cols-2 gap-2">
        <div className="bg-card rounded-lg p-2">Cell 1</div>
        <div className="bg-card rounded-lg p-2">Cell 2</div>
      </div>
    </div>
  );
}
```

Nützliche Themenbezogene Klassen:

- `text-muted-foreground` — Gedämpfte Textfarbe
- `bg-card` — Card Hintergrund
- `border` — Thema-ensprechende Border
- `rounded-lg` / `rounded-md` — Border Radius

## Tipps für fliegende Panele {#floating-panel-tips}

Wenn du ein ein fliegendes Panel renderst (`addFloatingPanel`) stellt das Panel seinen eigenen Container bereit.
Du musst deine Komponente nicht in eine `Card` verpacken:

```tsx
// Gut — Panel stellt Container
function MyPanel() {
  return (
    <div className="flex flex-col gap-3 p-3">
      <p>Content here</p>
    </div>
  );
}

// registrieren
api.ui.addFloatingPanel({
  id: 'my-panel',
  title: 'My Mod',
  icon: 'Puzzle',
  render: MyPanel,
});
```

## Eigene Komponenten an Platzierung registrieren {#registering-custom-components-at-placements}

Für fortschrittlichere UI kannst du eine React-Komponente direkt an einer UI-Platzierung registrieren:

```tsx
function MySettingsSection() {
  const [enabled, setEnabled] = useState(true);

  return (
    <div className="flex items-center justify-between p-2">
      <span>My Feature</span>
      <Switch checked={enabled} onCheckedChange={setEnabled} />
    </div>
  );
}

api.ui.registerComponent('settings-menu', {
  id: 'my-settings',
  component: MySettingsSection,
});
```
